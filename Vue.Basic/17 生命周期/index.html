<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="../js/vue.js"></script>
    <!-- 引入 day.js cdn-->
    <script src="https://cdn.bootcdn.net/ajax/libs/dayjs/1.11.7/dayjs.min.js"></script>
</head>

<body>
    <div id="app">
        <h2 style="opacity:1;">欢迎学习 Vue2</h2>
        <!-- 这边重名可以直接简写成 :style="{opacity}" -->
        <h2 :style="{opacity:opacity}">欢迎学习 Vue3</h2>
        <button @click="destroyTimer">销毁</button>
        <button @click="destroyBaoli">暴力销毁</button>
    </div>

    <script>
        let vm = new Vue({
            el: '#app',
            data: {
                opacity: 1
            },
            methods: {
                destroyTimer() {
                    clearInterval(this.timer)
                },
                destroyBaoli() {
                    this.$destroy()
                }
            },
            // 在数据监测、数据代理创建之前
            beforeCreate() {
                console.log('beforeCreate', this)
                    // 用于调试，可以在这里打断点，查看 data 是否已经初始化
                    // 数据代理没有开始，data 和 method 都不能使用
                    //debugger;
            },
            // 在数据监测、数据代理创建完成
            created() {
                console.log('created', this)
                    // 数据代理已经完成，可以使用 data 和 method
                    //debugger;
            },
            // 在模板解析之前
            beforeMount() {
                console.log('beforeMount', this)
                    // 模板还没有开始解析，页面上没有真实的 DOM 元素
                    // debugger;
            },
            // 挂载完毕，vue 找到模板，解析模板，生成虚拟 DOM,将虚拟 DOM 渲染到页面（实际 DOM)
            // Vue 完成模板的解析并把初始的真实的 DOM 元素放入页面后（挂载完毕）调用 mounted
            mounted() {
                // document.querySelector('h2').style.color = 'red'
                // 判断 this.$el 是否存在，如果存在，说明模板已经解析完成
                console.log('mounted', this.$el)
                console.log('mounted', this.$el instanceof HTMLElement)
                    // 模板已经解析完成，页面上有真实的 DOM 元素
                this.timer = setInterval(() => {
                    this.opacity -= 0.01
                    if (this.opacity <= 0) {
                        this.opacity = 1
                    }
                }, 16)
            },
            // 数据更新，但页面还没更新
            beforeUpdate() {
                console.log('beforeUpdate', this.$el)
                    //debugger;
            },
            // 页面和数据更新保持同步
            updated() {
                console.log('updated', this.$el)
                    //debugger;
            },
            beforeDestroy() {
                // 清除定时器
                clearInterval(this.timer)
                console.log('beforeDestory', this.$el)
                    //debugger;
            },
            destroyed() {
                console.log('destoryed', this.$el)
                    //debugger;
            }
        })
    </script>
</body>

</html>