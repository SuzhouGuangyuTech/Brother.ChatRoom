<!DOCTYPE html>
<html lang="en">

<!--
  学习内容(2023年02月24日 14:28:09)：
  知识点概要：	
        1. 数据代理：通过一个对象代理对另一个对象中属性的操作（读/写）。
            1.1 Object.defineProperty() 方法会直接在一个对象上定义一个新属性，或者修改一个对象的现有属性，并返回这个对象。
            1.2 vm.name -- getter -- data.name（直接看界面是否发生变化）
                set vm.name -- setter -- data.name(这个可以通过插件来查看)
  思考总结：这边完全可以理解为私有字段通过 getter 和 setter 来实现属性
  name 和 address 是暴露给外界的属性，而字段则是 _data.name 和 _data.address(这只能通过 vm 来获取)	这边是通过 Object.defineProperty() 来实现的。
-->

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>06 数据代理</title>
    <script src="../js/vue.js"></script>
</head>

<body>
    <div id="app">
        <h1>开发者姓名：{{name}}</h1>
        <h1>开发者住址：{{address}}</h1>
        <h1>测试：{{$options}}</h1>
    </div>
    <script>
        let number = 18;

        let person = {
            name: 'albertzhao',
            address: 'shanghai'
        };

        // 补充属性
        Object.defineProperty(person, 'age', {
            // value: 18,
            // enumerable: true, // 控制属性是否可以枚举
            // configurable: true, // 控制属性是否可以删除（控制台 delete  person.age 时，如果 configurable 为 false，无法删除）
            // writable: true // 控制属性是否可以修改

            // 当有人读取 person.age 时，会执行 get 方法(getter)，且返回值
            get() {
                console.log('读取了 age 属性');
                return number;
            },
            // 当有人修改 person.age 时，会执行 set 方法(setter)，且传入的参数为修改后的值
            set(newValue) {
                number = newValue;
            }
        });

        // 将所有属性名以数组的形式遍历出来，不包括不可枚举的属性
        console.log(Object.keys(person));

        console.log("++++++++");

        for (let key in person) {
            console.log(person[key]);
        }

        console.log(person);
        console.log("test");

        let vm = new Vue({
            data() {
                console.log('@@@', this); // 此处的 this 指向的是 vm
                return {
                    name: 'albertzhao',
                    address: 'shanghai'
                }
            }
        });

        console.log(vm);

        setTimeout(() => {
            vm.$mount('#app')
        }, 3000);
    </script>
</body>

</html>